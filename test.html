<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý tồn kho sản phẩm - Nhiều chi nhánh</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.js"></script>
    <style>
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .tab-button.active {
            background-color: #f8fafc;
            border-bottom: 2px solid #3b82f6;
            color: #3b82f6;
        }

        .badge-default {
            background-color: #3b82f6;
            color: white;
        }

        .badge-secondary {
            background-color: #6b7280;
            color: white;
        }

        .badge-destructive {
            background-color: #ef4444;
            color: white;
        }

        .badge-outline {
            border: 1px solid #d1d5db;
            background-color: transparent;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: none;
        }

        .toast.show {
            display: block;
        }

        .branch-column {
            min-width: 150px;
        }

        .sticky-column {
            position: sticky;
            left: 0;
            background: white;
            z-index: 10;
        }

        .table-container {
            max-height: 70vh;
            overflow-y: auto;
        }
    </style>
</head>

<body class="bg-gray-50 min-h-screen">

    <div class="container mx-auto p-6 space-y-6">
        <!-- Header -->
        <div class="flex items-center justify-between">
            <div>
                <h1 class="text-3xl font-bold text-gray-900">Quản lý tồn kho sản phẩm</h1>
                <p class="text-gray-600 mt-2">Bánh Hamburger Deluxe</p>
            </div>
            <button onclick="handleSave()" class="flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                <i data-lucide="save" class="w-4 h-4"></i>
                Lưu thay đổi
            </button>
        </div>

        <!-- Tabs -->
        <div class="space-y-6">
            <!-- Tab Navigation -->
            <div class="border-b border-gray-200">
                <nav class="flex space-x-8">
                    <button onclick="switchTab('variants')" id="tab-variants" class="tab-button active py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2">
                        <i data-lucide="package" class="w-4 h-4"></i>
                        Biến thể sản phẩm (5)
                    </button>
                    <button onclick="switchTab('toppings')" id="tab-toppings" class="tab-button py-2 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm flex items-center gap-2">
                        <i data-lucide="plus" class="w-4 h-4"></i>
                        Topping (4)
                    </button>
                </nav>
            </div>

            <!-- Variants Tab Content -->
            <div id="content-variants" class="tab-content active space-y-6">
                <!-- Filter Controls -->
                <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                    <div class="p-6 border-b border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-900 flex items-center gap-2">
                            <i data-lucide="filter" class="w-5 h-5"></i>
                            Bộ lọc và tìm kiếm
                        </h3>
                    </div>
                    <div class="p-6">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="relative">
                                <i data-lucide="search" class="absolute left-3 top-3 w-4 h-4 text-gray-400"></i>
                                <input type="text" placeholder="Tìm kiếm biến thể..." class="w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="all">Tất cả thuộc tính</option>
                                <option value="size">Kích thước</option>
                                <option value="color">Màu sắc</option>
                                <option value="flavor">Gia vị</option>
                            </select>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="all">Tất cả giá trị</option>
                                <option value="small">Nhỏ</option>
                                <option value="medium">Vừa</option>
                                <option value="large">Lớn</option>
                            </select>
                            <button onclick="toggleInactive()" class="flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">
                                <i data-lucide="eye-off" class="w-4 h-4"></i>
                                Hiện tạm dừng
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Variants Table -->
                <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                    <div class="p-6 border-b border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-900">Tồn kho biến thể theo chi nhánh</h3>
                        <p class="text-gray-600 mt-1">Quản lý số lượng tồn kho của từng biến thể sản phẩm tại các chi nhánh</p>
                    </div>
                    <div class="p-6">
                        <div class="overflow-x-auto table-container">
                            <table class="w-full" id="variants-table">
                                <thead>
                                    <tr class="border-b border-gray-200">
                                        <th class="sticky-column text-left py-3 px-4 font-medium text-gray-900 w-96 border-r border-gray-200">Biến thể</th>
                                        <th class="sticky-column text-center py-3 px-4 font-medium text-gray-900 border-r border-gray-200" style="left: 400px;">Tổng điều chỉnh giá</th>
                                        <!-- Branch columns will be dynamically added here -->
                                        <th class="branch-column text-center py-3 px-4 font-medium text-gray-900 min-w-36" data-branch-id="1">
                                            <div class="flex items-center justify-center gap-2">
                                                <i data-lucide="store" class="w-4 h-4"></i>
                                                <div>
                                                    <div class="font-medium">Chi nhánh Quận 1</div>
                                                    <div class="text-xs text-gray-500 font-normal">Tồn kho</div>
                                                </div>
                                            </div>
                                        </th>
                                        <th class="branch-column text-center py-3 px-4 font-medium text-gray-900 min-w-36" data-branch-id="2">
                                            <div class="flex items-center justify-center gap-2">
                                                <i data-lucide="store" class="w-4 h-4"></i>
                                                <div>
                                                    <div class="font-medium">Chi nhánh Quận 3</div>
                                                    <div class="text-xs text-gray-500 font-normal">Tồn kho</div>
                                                </div>
                                            </div>
                                        </th>
                                        <th class="branch-column text-center py-3 px-4 font-medium text-gray-900 min-w-36" data-branch-id="3">
                                            <div class="flex items-center justify-center gap-2">
                                                <i data-lucide="store" class="w-4 h-4"></i>
                                                <div>
                                                    <div class="font-medium">Chi nhánh Thủ Đức</div>
                                                    <div class="text-xs text-gray-500 font-normal">Tồn kho</div>
                                                </div>
                                            </div>
                                        </th>
                                        <th class="branch-column text-center py-3 px-4 font-medium text-gray-900 min-w-36 hidden" data-branch-id="4">
                                            <div class="flex items-center justify-center gap-2">
                                                <i data-lucide="store" class="w-4 h-4"></i>
                                                <div>
                                                    <div class="font-medium">Chi nhánh Quận 7</div>
                                                    <div class="text-xs text-gray-500 font-normal">Tồn kho</div>
                                                </div>
                                            </div>
                                        </th>
                                        <th class="branch-column text-center py-3 px-4 font-medium text-gray-900 min-w-36 hidden" data-branch-id="5">
                                            <div class="flex items-center justify-center gap-2">
                                                <i data-lucide="store" class="w-4 h-4"></i>
                                                <div>
                                                    <div class="font-medium">Chi nhánh Bình Thạnh</div>
                                                    <div class="text-xs text-gray-500 font-normal">Tồn kho</div>
                                                </div>
                                            </div>
                                        </th>
                                        <th class="branch-column text-center py-3 px-4 font-medium text-gray-900 min-w-36 hidden" data-branch-id="6">
                                            <div class="flex items-center justify-center gap-2">
                                                <i data-lucide="store" class="w-4 h-4"></i>
                                                <div>
                                                    <div class="font-medium">Chi nhánh Tân Bình</div>
                                                    <div class="text-xs text-gray-500 font-normal">Tồn kho</div>
                                                </div>
                                            </div>
                                        </th>
                                        <th class="branch-column text-center py-3 px-4 font-medium text-gray-900 min-w-36 hidden" data-branch-id="7">
                                            <div class="flex items-center justify-center gap-2">
                                                <i data-lucide="store" class="w-4 h-4"></i>
                                                <div>
                                                    <div class="font-medium">Chi nhánh Gò Vấp</div>
                                                    <div class="text-xs text-gray-500 font-normal">Tồn kho</div>
                                                </div>
                                            </div>
                                        </th>
                                        <th class="branch-column text-center py-3 px-4 font-medium text-gray-900 min-w-36 hidden" data-branch-id="8">
                                            <div class="flex items-center justify-center gap-2">
                                                <i data-lucide="store" class="w-4 h-4"></i>
                                                <div>
                                                    <div class="font-medium">Chi nhánh Phú Nhuận</div>
                                                    <div class="text-xs text-gray-500 font-normal">Tồn kho</div>
                                                </div>
                                            </div>
                                        </th>
                                        <th class="branch-column text-center py-3 px-4 font-medium text-gray-900 min-w-36 hidden" data-branch-id="9">
                                            <div class="flex items-center justify-center gap-2">
                                                <i data-lucide="store" class="w-4 h-4"></i>
                                                <div>
                                                    <div class="font-medium">Chi nhánh Tân Phú</div>
                                                    <div class="text-xs text-gray-500 font-normal">Tồn kho</div>
                                                </div>
                                            </div>
                                        </th>
                                        <th class="branch-column text-center py-3 px-4 font-medium text-gray-900 min-w-36 hidden" data-branch-id="10">
                                            <div class="flex items-center justify-center gap-2">
                                                <i data-lucide="store" class="w-4 h-4"></i>
                                                <div>
                                                    <div class="font-medium">Chi nhánh Hà Nội</div>
                                                    <div class="text-xs text-gray-500 font-normal">Tồn kho</div>
                                                </div>
                                            </div>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Variant 1 -->
                                    <tr class="border-b border-gray-100">
                                        <td class="sticky-column py-4 px-4 border-r border-gray-200">
                                            <div class="flex items-start gap-3">
                                                <div class="space-y-2">
                                                    <div class="font-medium">Kích thước: Nhỏ • Màu sắc: Đỏ • Gia vị: Cay</div>
                                                    <div class="flex flex-wrap gap-1">
                                                        <span class="badge-outline px-2 py-1 rounded text-xs">Kích thước: Nhỏ</span>
                                                        <span class="badge-outline px-2 py-1 rounded text-xs">Màu sắc: Đỏ</span>
                                                        <span class="badge-outline px-2 py-1 rounded text-xs">Gia vị: Cay <span class="ml-1 text-green-600">+5.000₫</span></span>
                                                    </div>
                                                    <span class="badge-default px-2 py-1 rounded text-xs">Hoạt động</span>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="sticky-column text-center py-4 px-4 border-r border-gray-200" style="left: 400px;">
                                            <div class="font-medium">+5.000₫</div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4" data-branch-id="1">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="50" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4" data-branch-id="2">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="30" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4" data-branch-id="3">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="25" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4 hidden" data-branch-id="4">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="45" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4 hidden" data-branch-id="5">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="35" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4 hidden" data-branch-id="6">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="28" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4 hidden" data-branch-id="7">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="32" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4 hidden" data-branch-id="8">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="18" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4 hidden" data-branch-id="9">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="22" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4 hidden" data-branch-id="10">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="40" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                    </tr>

                                    <!-- Variant 2 -->
                                    <tr class="border-b border-gray-100">
                                        <td class="sticky-column py-4 px-4 border-r border-gray-200">
                                            <div class="flex items-start gap-3">
                                                <div class="space-y-2">
                                                    <div class="font-medium">Kích thước: Nhỏ • Màu sắc: Xanh • Gia vị: Ngọt</div>
                                                    <div class="flex flex-wrap gap-1">
                                                        <span class="badge-outline px-2 py-1 rounded text-xs">Kích thước: Nhỏ</span>
                                                        <span class="badge-outline px-2 py-1 rounded text-xs">Màu sắc: Xanh</span>
                                                        <span class="badge-outline px-2 py-1 rounded text-xs">Gia vị: Ngọt</span>
                                                    </div>
                                                    <span class="badge-default px-2 py-1 rounded text-xs">Hoạt động</span>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="sticky-column text-center py-4 px-4 border-r border-gray-200" style="left: 400px;">
                                            <div class="font-medium">0₫</div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4" data-branch-id="1">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="40" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4" data-branch-id="2">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="35" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4" data-branch-id="3">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="20" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4 hidden" data-branch-id="4">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="38" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4 hidden" data-branch-id="5">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="42" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4 hidden" data-branch-id="6">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="25" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4 hidden" data-branch-id="7">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="30" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4 hidden" data-branch-id="8">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="15" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4 hidden" data-branch-id="9">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="28" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="branch-cell text-center py-4 px-4 hidden" data-branch-id="10">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="33" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Toppings Tab Content -->
            <div id="content-toppings" class="tab-content space-y-6">
                <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                    <div class="p-6 border-b border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-900">Tồn kho topping theo chi nhánh</h3>
                        <p class="text-gray-600 mt-1">Quản lý số lượng tồn kho của từng loại topping tại các chi nhánh</p>
                    </div>
                    <div class="p-6">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-gray-200">
                                        <th class="text-left py-3 px-4 font-medium text-gray-900 w-72">Topping</th>
                                        <th class="text-center py-3 px-4 font-medium text-gray-900">Giá</th>
                                        <th class="text-center py-3 px-4 font-medium text-gray-900 min-w-36">
                                            <div class="flex items-center justify-center gap-2">
                                                <i data-lucide="store" class="w-4 h-4"></i>
                                                <div>
                                                    <div class="font-medium">Chi nhánh Quận 1</div>
                                                    <div class="text-xs text-gray-500 font-normal">Tồn kho</div>
                                                </div>
                                            </div>
                                        </th>
                                        <th class="text-center py-3 px-4 font-medium text-gray-900 min-w-36">
                                            <div class="flex items-center justify-center gap-2">
                                                <i data-lucide="store" class="w-4 h-4"></i>
                                                <div>
                                                    <div class="font-medium">Chi nhánh Quận 3</div>
                                                    <div class="text-xs text-gray-500 font-normal">Tồn kho</div>
                                                </div>
                                            </div>
                                        </th>
                                        <th class="text-center py-3 px-4 font-medium text-gray-900 min-w-36">
                                            <div class="flex items-center justify-center gap-2">
                                                <i data-lucide="store" class="w-4 h-4"></i>
                                                <div>
                                                    <div class="font-medium">Chi nhánh Thủ Đức</div>
                                                    <div class="text-xs text-gray-500 font-normal">Tồn kho</div>
                                                </div>
                                            </div>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Topping rows... -->
                                    <tr class="border-b border-gray-100">
                                        <td class="py-4 px-4">
                                            <div class="flex items-center gap-3">
                                                <img src="https://via.placeholder.com/40x40" alt="Phô mai thêm" class="w-10 h-10 rounded-md object-cover">
                                                <div>
                                                    <div class="font-medium">Phô mai thêm</div>
                                                    <div class="text-sm text-gray-500">Phô mai Cheddar cao cấp</div>
                                                    <span class="badge-default px-2 py-1 rounded text-xs">Hoạt động</span>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="text-center py-4 px-4 font-medium">10.000₫</td>
                                        <td class="text-center py-4 px-4">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="100" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="text-center py-4 px-4">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="80" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                        <td class="text-center py-4 px-4">
                                            <div class="space-y-2">
                                                <input type="number" min="0" value="60" class="w-20 text-center mx-auto px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">

                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Tab switching functionality
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });

            // Show selected tab content
            document.getElementById(`content-${tabName}`).classList.add('active');

            // Add active class to selected tab button
            document.getElementById(`tab-${tabName}`).classList.add('active');
        }

        // Branch management
        let showAllBranches = false;

        function toggleAllBranches() {
            showAllBranches = !showAllBranches;
            const button = document.getElementById('toggle-all-branches');
            const checkboxes = document.querySelectorAll('.branch-checkbox');

            if (showAllBranches) {
                // Check all branches
                checkboxes.forEach(checkbox => {
                    checkbox.checked = true;
                });
                button.innerHTML = '<i data-lucide="eye-off" class="w-4 h-4"></i> Ẩn bớt chi nhánh';
            } else {
                // Uncheck all branches except first 3
                checkboxes.forEach((checkbox, index) => {
                    checkbox.checked = index < 3;
                });
                button.innerHTML = '<i data-lucide="eye" class="w-4 h-4"></i> Hiện tất cả chi nhánh';
            }

            updateBranchDisplay();
            lucide.createIcons();
        }

        function updateBranchDisplay() {
            const checkboxes = document.querySelectorAll('.branch-checkbox');
            const selectedCount = document.querySelectorAll('.branch-checkbox:checked').length;
            const totalCount = checkboxes.length;

            // Update counter
            document.getElementById('selected-count').textContent = selectedCount;
            document.getElementById('total-count').textContent = totalCount;

            // Show/hide branch columns
            checkboxes.forEach(checkbox => {
                const branchId = checkbox.dataset.branchId;
                const columns = document.querySelectorAll(`[data-branch-id="${branchId}"]`);

                columns.forEach(column => {
                    if (checkbox.checked) {
                        column.classList.remove('hidden');
                    } else {
                        column.classList.add('hidden');
                    }
                });
            });
        }

        // Add event listeners to branch checkboxes
        document.addEventListener('DOMContentLoaded', function() {
            const checkboxes = document.querySelectorAll('.branch-checkbox');
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updateBranchDisplay);
            });

            // Initialize display
            updateBranchDisplay();
        });

        // Toggle inactive variants visibility
        let showInactive = false;

        function toggleInactive() {
            showInactive = !showInactive;
            const inactiveVariants = document.querySelectorAll('.inactive-variant');
            const button = event.target.closest('button');

            if (showInactive) {
                inactiveVariants.forEach(variant => variant.classList.remove('hidden'));
                button.innerHTML = '<i data-lucide="eye" class="w-4 h-4"></i> Ẩn tạm dừng';
            } else {
                inactiveVariants.forEach(variant => variant.classList.add('hidden'));
                button.innerHTML = '<i data-lucide="eye-off" class="w-4 h-4"></i> Hiện tạm dừng';
            }

            lucide.createIcons();
        }

        // Save functionality
        function handleSave() {
            const toast = document.getElementById('toast');
            toast.classList.add('show');

            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Update stock status based on quantity
        function updateStockStatus(input) {
            const quantity = parseInt(input.value) || 0;
            const badge = input.parentElement.querySelector('.badge-default, .badge-secondary, .badge-destructive');

            if (quantity === 0) {
                badge.className = 'badge-destructive px-2 py-1 rounded text-xs';
                badge.textContent = 'Hết hàng';
            } else if (quantity < 10) {
                badge.className = 'badge-secondary px-2 py-1 rounded text-xs';
                badge.textContent = 'Sắp hết';
            } else {
                badge.className = 'badge-default px-2 py-1 rounded text-xs';
                badge.textContent = 'Còn hàng';
            }
        }

        // Add event listeners to all stock inputs
        document.addEventListener('DOMContentLoaded', function() {
            const stockInputs = document.querySelectorAll('input[type="number"]');
            stockInputs.forEach(input => {
                input.addEventListener('change', function() {
                    updateStockStatus(this);
                });
            });
        });
    </script>
</body>

</html>